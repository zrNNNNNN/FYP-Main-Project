<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matching Puzzle — Match Courses to Jobs</title>
<style>
  :root{
    --bg:#f7fafc; --card:#ffffff; --accent:#0f62fe; --muted:#6b7280;
    --success:#10b981; --danger:#ef4444;
  }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;background:var(--bg);color:#111;}
  .wrap{max-width:980px;margin:20px auto;padding:16px;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;}
  h1{font-size:1.4rem;margin:.2rem 0;}
  p.lead{margin:.2rem 0 .6rem;color:var(--muted);font-size:.95rem;}
  .board{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px;}
  @media (max-width:700px){ .board{grid-template-columns:1fr;} }
  .pane{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(15,23,42,.06);}
  .pane h2{margin:0 0 10px;font-size:1rem;}
  .list{display:flex;flex-direction:column;gap:8px;}
  .item{
    display:flex;align-items:center;justify-content:space-between;
    padding:10px;border-radius:10px;border:1px solid #edf2f7;background:linear-gradient(180deg, #fff, #fcfcff);
    user-select:none;cursor:pointer;
  }
  .item.selected{outline:3px solid rgba(15,98,254,.12);box-shadow:0 6px 12px rgba(15,98,254,.06);}
  .item.matched{background:linear-gradient(90deg,#f0fff4,#ecfdf5);border-color:rgba(16,185,129,.2);color:#065f46;}
  .pair-indicator{font-size:.88rem;color:var(--muted);min-width:26px;text-align:center;}
  .controls{display:flex;gap:10px;align-items:center;margin-top:12px;flex-wrap:wrap;}
  button{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600;}
  button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(15,98,254,.12);}
  .stats{margin-left:auto;color:var(--muted);font-size:.9rem;}
  .message{margin-top:12px;padding:10px;border-radius:10px;background:#fff;font-size:.95rem;color:var(--muted);border:1px solid #eee;}
  /* popup */
  .overlay{position:fixed;inset:0;background:rgba(2,6,23,.45);display:none;align-items:center;justify-content:center;z-index:40;backdrop-filter:blur(2px);}
  .modal{background:var(--card);padding:20px;border-radius:14px;max-width:420px;width:94%;text-align:center;box-shadow:0 18px 40px rgba(2,6,23,.32);}
  .modal h3{margin:0 0 8px;}
  .keysvg{width:92px;height:92px;margin:8px auto;display:block;}
  .small{font-size:.9rem;color:var(--muted);}
  .tryagain{margin-top:8px;background:transparent;border:1px solid #eee;color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;}
</style>
</head>
<body>
<div class="wrap" role="main">
  <header>
    <div>
      <h1>Match the SEG Course to a future job prospect</h1>
      <p class="lead">Tap a course (left) then a job (right) to make a match. Match all 5 to receive <strong>Key #1</strong>.</p>
    </div>
    <div class="stats" aria-live="polite">Matches: <span id="matchedCount">0</span>/5 &nbsp;•&nbsp; Attempts: <span id="attempts">0</span></div>
  </header>

  <section class="board" aria-label="Matching board">
    <div class="pane" id="coursesPane" aria-labelledby="coursesTitle">
      <h2 id="coursesTitle">Courses</h2>
      <div class="list" id="coursesList" aria-live="polite"></div>
    </div>

    <div class="pane" id="jobsPane" aria-labelledby="jobsTitle">
      <h2 id="jobsTitle">Jobs</h2>
      <div class="list" id="jobsList" aria-live="polite"></div>
    </div>
  </section>

  <div class="controls">
    <button id="resetBtn" class="ghost" aria-label="Reset game">Reset</button>
    <div class="message small" id="hint">Tip: Tap a Course then a Job. Correct matches will lock in.</div>
  </div>
</div>

<!-- Key popup (hidden until success) -->
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal">
    <h3 id="modalTitle">Key #1 Received!</h3>
    <!-- Inline SVG key -->
    <svg class="keysvg" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#ffd166"/><stop offset="1" stop-color="#f4a261"/></linearGradient></defs>
      <path d="M44 24a12 12 0 1 0-8.485 11.314L43 31.828V36h4v6h-4v4h-4v-4h-4v4h-6l-9 9v-6H8v-8h8v-6h6v-6l2-2.001A12 12 0 0 0 44 24z" fill="url(#g)"/>
      <circle cx="44" cy="24" r="4" fill="#fff" opacity=".6"/>
    </svg>
    <p class="small">Screenshot this page to claim your prize later at Level 1!</p>
    <div style="margin-top:12px;">
      <button id="closeModal" class="tryagain">Close</button>
    </div>
  </div>
</div>

<script>
/* -------------------------
   Customize courses & jobs
   ------------------------- */
const courses = [
  "Aerospace Engineering",
  "Cloud Engineering",
  "Biomedical Engineering",
  "Advanced & Digital Manufacturing",
  "AI & Data Engineering"
];

const jobs = [
  "Aerospace Systems Engineer",
  "Cloud Infrastructure Engineer",
  "Medical Device Engineer",
  "Advanced Manufacturing Systems Engineer",
  "Machine Learning Engineer"
];

/* -------------------------
   DOM references
   ------------------------- */
const coursesList = document.getElementById('coursesList');
const jobsList = document.getElementById('jobsList');
const matchedCountEl = document.getElementById('matchedCount');
const attemptsEl = document.getElementById('attempts');
const overlay = document.getElementById('overlay');
const resetBtn = document.getElementById('resetBtn');
const closeModalBtn = document.getElementById('closeModal');

let state = {
  shuffledCourses: [],
  shuffledJobs: [],
  courseMap: [],
  jobMap: [],
  selectedCourseIndex: null,
  selectedJobIndex: null,
  matchedPairs: {}, // jobShuffledIdx: courseShuffledIdx
  attempts: 0
};

function shuffleWithIndex(array) {
  return array.map((v,i)=>({v,i})).sort(()=>Math.random()-0.5);
}

function resetGame() {
  state.shuffledCourses = shuffleWithIndex(courses);
  state.shuffledJobs = shuffleWithIndex(jobs);
  state.courseMap = state.shuffledCourses.map(x=>x.i);
  state.jobMap = state.shuffledJobs.map(x=>x.i);
  state.selectedCourseIndex = null;
  state.selectedJobIndex = null;
  state.matchedPairs = {};
  state.attempts = 0;
  attemptsEl.textContent = 0;
  matchedCountEl.textContent = 0;
  overlay.style.display = 'none';
  renderLists();
}

function renderLists(){
  coursesList.innerHTML = '';
  jobsList.innerHTML = '';

  state.shuffledCourses.forEach((entry, i) => {
    const div = document.createElement('div');
    div.className = 'item';
    div.setAttribute('role','button');
    div.tabIndex = 0;
    div.dataset.index = i;
    div.innerHTML = `<div>${entry.v}</div><div class="pair-indicator" aria-hidden="true">☰</div>`;
    if (Object.values(state.matchedPairs).includes(String(i))) {
      div.classList.add('matched');
    }
    div.addEventListener('click', ()=>selectCourse(i));
    div.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectCourse(i); });
    coursesList.appendChild(div);
  });

  state.shuffledJobs.forEach((entry, j) => {
    const div = document.createElement('div');
    div.className = 'item';
    div.setAttribute('role','button');
    div.tabIndex = 0;
    div.dataset.index = j;
    div.innerHTML = `<div style="text-align:left">${entry.v}</div><div class="pair-indicator" aria-hidden="true">?</div>`;
    if (state.matchedPairs[j] !== undefined) div.classList.add('matched');
    div.addEventListener('click', ()=>selectJob(j));
    div.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectJob(j); });
    jobsList.appendChild(div);
  });

  updateSelectionStyles();
}

function updateSelectionStyles() {
  document.querySelectorAll('.item').forEach(el=>el.classList.remove('selected'));
  if (state.selectedCourseIndex !== null) {
    const el = coursesList.querySelector(`[data-index="${state.selectedCourseIndex}"]`);
    if(el) el.classList.add('selected');
  }
  if (state.selectedJobIndex !== null) {
    const el = jobsList.querySelector(`[data-index="${state.selectedJobIndex}"]`);
    if(el) el.classList.add('selected');
  }
}

function selectCourse(i){
  if (Object.values(state.matchedPairs).includes(String(i))) return;
  state.selectedCourseIndex = i;
  if (state.selectedJobIndex !== null) {
    tryMatch();
  } else {
    updateSelectionStyles();
  }
}

function selectJob(j){
  if (state.matchedPairs[j] !== undefined) return;
  state.selectedJobIndex = j;
  if (state.selectedCourseIndex !== null) {
    tryMatch();
  } else updateSelectionStyles();
}

function tryMatch(){
  const courseOriginalIndex = state.courseMap[state.selectedCourseIndex];
  const jobOriginalIndex = state.jobMap[state.selectedJobIndex];

  state.attempts++;
  attemptsEl.textContent = state.attempts;

  if (courseOriginalIndex === jobOriginalIndex) {
    state.matchedPairs[state.selectedJobIndex] = String(state.selectedCourseIndex);
    matchedCountEl.textContent = Object.keys(state.matchedPairs).length;
    state.selectedCourseIndex = null;
    state.selectedJobIndex = null;
    renderLists();
    if (Object.keys(state.matchedPairs).length === courses.length) {
      overlay.style.display = 'flex';
    }
  } else {
    const cEl = coursesList.querySelector(`[data-index="${state.selectedCourseIndex}"]`);
    const jEl = jobsList.querySelector(`[data-index="${state.selectedJobIndex}"]`);
    if (cEl) cEl.style.borderColor = 'rgba(239,68,68,.25)';
    if (jEl) jEl.style.borderColor = 'rgba(239,68,68,.25)';
    setTimeout(()=>{
      if (cEl) cEl.style.borderColor = '';
      if (jEl) jEl.style.borderColor = '';
      state.selectedCourseIndex = null;
      state.selectedJobIndex = null;
      updateSelectionStyles();
    },650);
  }
}

/* Event bindings */
resetBtn.addEventListener('click', resetGame);
closeModalBtn.addEventListener('click', ()=>{ overlay.style.display = 'none'; });

/* Start */
resetGame();
</script>
</body>
</html>

